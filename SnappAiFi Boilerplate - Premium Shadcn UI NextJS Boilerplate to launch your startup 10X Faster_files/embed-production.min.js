!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){!function(){var e;function t(){if(e)return e;for(var t=0;t<window.length;t++)try{var n=window[t].document.querySelectorAll(".encharge-form-embed-script");if(n&&n.length>0)return e=window[t]}catch(e){console.log(e)}return e=window}function n(){try{return t().document}catch(e){return window.document}}function r(e){var t=0,r=setInterval((function(){var a=function(){try{var e=n().cookie.split("; ").find((function(e){return e.startsWith("encheventsnippet=")})).split("=")[1],t=e&&JSON.parse(decodeURIComponent(e));return t&&t.uuid}catch(e){}}();a&&e&&e.contentWindow&&(e.contentWindow.postMessage({enchargeUserId:a},"*"),clearInterval(r)),t>50&&clearInterval(r),t+=1}),100)}function a(){function e(){return window}function t(){return window.document}var n=function(){return window.enchargeAnonymousUserId},r=function(e){window.enchargeAnonymousUserId=e};function a(){return n()||r("undefined"!=typeof crypto&&crypto.getRandomValues?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))),e().parent.postMessage({enchargeUserId:n()},"*"),n()}var o,c=!1;function i(){if(!c){c=!0;var e="".concat("https://forms.encharge.io","/v1/forms/").concat(formId,"/view?enchargeAnonymousId=").concat(n());if("undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(e);else t().createElement("img").src=e}}function d(n){var r=t(),a=n||Math.max(r.body.scrollHeight,r.body.offsetHeight,r.documentElement.clientHeight,r.documentElement.scrollHeight,r.documentElement.offsetHeight);Math.max(r.body.scrollWidth,r.body.offsetWidth,r.documentElement.clientWidth,r.documentElement.scrollWidth,r.documentElement.offsetWidth);e().parent.postMessage({EnchargeFrameHeight:a,formId:formId},"*")}function s(t,r){var o=t.id,c=document.getElementById("form-".concat(o));if(!c){var s=document.getElementsByTagName("form");s&&s.length&&(c=s[0])}function f(){var a=new XMLHttpRequest,i=new FormData(c);i.append("enchargeAnonymousId",n());i.append("enchargeSignature",function(e,t){var n=JSON.stringify(Object.keys(t).sort().reduce((function(e,n){return e.push([n,t[n]]),e}),[]));return String(function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=3735928559^n,a=1103547991^n,o=0;o<e.length;o++)t=e.charCodeAt(o),r=Math.imul(r^t,2654435761),a=Math.imul(a^t,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507),4294967296*(2097151&(a^=Math.imul(r^r>>>13,3266489909)))+(r>>>0)}(e+n))}(r,Object.fromEntries(i))),i.append("enchargeChallenge",r),a.open("POST","".concat("https://api.encharge.io","/v1/forms/").concat(o,"/submission")),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status){var n=t&&t.data&&t.data.successMessage&&t.data.successMessage.isActive,r=t&&t.data&&t.data.redirectPage&&t.data.redirectPage.isActive,o=t&&t.data&&t.data.redirectPage&&t.data.redirectPage.text;if(n){var c=document.getElementById("form-preview"),s=document.getElementById("success-page");c.hidden=!0,s.hidden=!1}else if(r&&o){var f=function(e,t){if(!e||!t)return e;if(!(t instanceof FormData))return e;var n={};return Array.from(t.entries()).forEach((function(e){var t=e[0],r=e[1];n[t]=r})),e.replace(/{{(.*?)}}/g,(function(e,t){var r=t.trim();return n.hasOwnProperty(r)?n[r]:e}))}(o,i);e().parent.postMessage({enchargeRedirectPage:f},"*")}}else{var u="Unexpected error has occured";try{if(a.responseText){var l=JSON.parse(a.responseText);l&&l.error&&l.error.message&&(u=l.error.message)}}catch(e){}var m=document.getElementsByClassName("encharge-form-error"),h=m&&m[0];if(!h)return;h.innerHTML=u,h.style.display="block",d(1)}},a.send(JSON.stringify(Object.fromEntries(i)))}c.onsubmit=function(e){return n()?f():(a(),i(),setTimeout(f,100)),!1}}e().addEventListener("visibilitychange",(function(){"hidden"===t().visibilityState&&i()})),e().addEventListener("pagehide",(function(){i()})),e().addEventListener("message",(function(e){Object.prototype.hasOwnProperty.call(e.data,"enchargeUserId")&&(r(e.data.enchargeUserId),i())})),setTimeout((function(){n()||a(),i()}),5e3),e().addEventListener("resize",(function(){d()})),e().addEventListener("load",(function(){d()})),(o=new XMLHttpRequest).open("GET","".concat("https://forms.encharge.io","/v1/forms/").concat(formId,"/data")),o.onload=function(){if(200===o.status){var e=JSON.parse(o.responseText);if(!(e&&e.form&&e.form.isActive))return;var n=e&&e.form&&e.form.data&&e.form.data.formExport&&e.form.data.formExport.html;n&&(t().body.innerHTML=n);var r=e&&e.form&&e.form.data&&e.form.data.formExport&&e.form.data.formExport.css;if(r){var a=document.createElement("style");document.head.appendChild(a),a.outerHTML=r}var c=e&&e.challenge;s(e.form,c),d()}},o.send()}t().addEventListener("message",(function(e){if(Object.prototype.hasOwnProperty.call(e.data,"EnchargeFrameHeight")){var r="encharge_iframe_".concat(e.data.formId),a=n().querySelectorAll("#".concat(r));if(a&&a.length>0)for(var o=0;o<a.length;o++)a[o].style.height="".concat(e.data.EnchargeFrameHeight,"px")}else if(Object.prototype.hasOwnProperty.call(e.data,"enchargeRedirectPage"))t().location.href="https://".concat(e.data.enchargeRedirectPage.replace("https://",""));else if(Object.prototype.hasOwnProperty.call(e.data,"enchargeUserId")){var c=e.data.enchargeUserId;window.EncTracking&&window.EncTracking.setId&&window.EncTracking.setId(c)}else if(Object.prototype.hasOwnProperty.call(e.data,"EnchargeFrameWidth")){var i="encharge_iframe_".concat(e.data.formId),d=n().querySelectorAll("#".concat(i));if(d&&d.length&&e.data.EnchargeFrameWidth)for(var s=0;s<d.length;s++)d[s].style.width="".concat(e.data.EnchargeFrameWidth,"px")}})),setInterval((function(){n().querySelectorAll(".encharge-form-embed").forEach((function(e){if("true"!==e.getAttribute("data-encharge-processed")){var t=e.getAttribute("data-encharge-form-id");e.setAttribute("data-encharge-processed","true");var o=n().createElement("iframe");o.setAttribute("width","100%"),o.id="encharge_iframe_".concat(t),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("style","border: none;");var c='\n      <html>\n        <head>\n          <link href="https://fonts.googleapis.com/css?family=Open Sans|Roboto|Roboto Slab|Roboto Mono" rel="stylesheet">\n          <script>var formId = "'.concat(t,'";<\/script>\n          <script>(').concat(a,")();<\/script>\n        </head>\n        <body></body>\n      </html>");o.addEventListener("load",(function(){r(o)}));var i=window.btoa(c);o.setAttribute("src","data:text/html;base64,".concat(i)),e.parentNode.replaceChild(o,e)}}))}),300)}()}])}));